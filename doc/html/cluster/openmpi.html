<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>

<meta http-equiv="Content-Type" content="text/html" charset="zh_TW.UTF-8">
<title>openmpi</title>
<link rel="stylesheet" href="../defaults.css" type="text/css">
</head>
<body>

<!--header-->
<h1>Openmpi安裝與設定</h1>
<a href="#download"><li class="title">1.下載openmpi</li></a>
<br /><a href="#set"><li class="title">2.組態設定與編譯安裝</li></a>
<br /><a href="#set"><li class="title">3.設定環境變數</li></a>
<br /><a href="#test"><li class="title">4.測試環境</li></a>
<hr />

<!--download-->
<a name="download"><h2>1.下載openmpi-1.6.5.tar.bz2</h2>
<p class="h2">
	http://www.open-mpi.org/software/ompi/v1.6/
	下載並解壓縮到目錄下
</p>
<div class="commands">
	root:~ # <span class="cmds">wget</span> http://www.open-mpi.org/software/ompi/v1.4/downloads/openmpi-1.6.5.tar.gz
	<br />root:~ # <span class="cmds"> tar</span> -zxf openmpi-1.4.1.tar.gz
</div>
<hr />



<!--set-->
<a name="set"><h2>2.組態設定與編譯安裝</h2>
<p class="h2">
	首先，先設定intel的parallel_studio上的環境變數compilevars.sh與mklvars.sh
</p>
<div class="commands">
	root:~ # <span class="cmds">source</span> /the/path/u/install/intel/composer_xe_2013.5.192/bin/compilevars.sh intel64
	<br />root:~ # <span class="cmds">source</span> /the/path/u/install/intel/mkl/bin/mklvars.sh intel64
</div>
<p class="h2">
	設定openmpi的環境變數
</p>
<div class="commands">
	root:~ # <span class="cmds">env 
	CC="icc" CFLAGS="-O" F77="ifort" FFLAGS="-O" CXX="icpc" CXXFLAGS="-O" FC="ifort -FR -lowercase" FCFLAGS="-O" ./configure --prefix=/the/path/u/install/openmpi
	<br />
	<span class="cmts">
		#env是屬於一次性的環境變數設定，設定完後面緊接著作安裝(./configure --prefix=/usr/local/openmpi)的動作，切記不可分兩行打否則環境不會生效
	</span>
	<br />root:~ # <span class="cmds">make && make install</span>
	<br /><span class="cmts">#編譯並安裝，這一步會跑很久</span>
	<br /><span class="cmts">
		#跑完到剛才指定的目錄下確認目錄是否存在已確認安裝成功，若否，請刪除解壓縮後的目錄，重新再解壓縮一次
	</span>
</div>
<hr />



<!-- env var -->
<a name="env"><h2>3.設定環境變數</h2>
<p class="h2">
	編輯一個openmpi環境變數檔
	請參考
	<a href="openmpi/openmpi.sh"></a>
	路徑指定自己安裝的目錄
</p>
<hr />



<!--test-->
<a name="test"><h2>4.測試環境</h2>
<p class="h2"></p>
<div class="commands">
	root:~ #<span class="cmds">which</span> ifort
	<br />/tmp/otter/intel/composer_xe_2013.5.192/bin/intel64/ifort
	<br />root:~ # <span class="cmds">which</span> icc
	<br />/tmp/otter/intel/composer_xe_2013.5.192/bin/intel64/icc
	<br /><span class="cmts">#確認編譯器環境變數是否生效，如果source成功則會顯示該路徑</span>
	<br />root:~ # <span class="cmds">which</span>mpirun
	<br />/tmp/otter/openmpi/bin/mpirun
	<br /><span class="cmts">#確認openmpi的環境變數是否生效</span>
</div>
<hr />



<!--changelog-->
<li class="changelog">2014/01/15 第一次完成</li>



</body>
</html>
